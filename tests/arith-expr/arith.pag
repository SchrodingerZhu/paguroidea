lexer {
    definition DIGIT     = '0' .. '9';
    active token LPAREN     = '(';
    active token RPAREN     = ')';
    active token PLUS     = '+';
    active token MULT     = '*';
    active token INT       = DIGIT+;
    active token SPECIAL  = '\u{FF}' .. '\u{D7FF}';
    silent token WHITESPACE = (' ' | '\t' | '\n' | '\r')+;
}

parser expr {
    active fixpoint expr
        = mult ~ (PLUS ~ mult)*;

    active fixpoint mult
        = primary ~ (MULT ~ primary)*;

    silent fixpoint primary
        = special | int | LPAREN ~ expr ~ RPAREN;

    active definition int
        = INT;

    active definition special
        = SPECIAL;
}
