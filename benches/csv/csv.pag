lexer {
    active token TEXT     = (!('"' | '\r' | '\n' | ','))+;
    active token STRING     = '"' ~ ('"' ~ '"' | !'"')* ~ '"';
    active token CRLF       = '\r'? ~ '\n';
    active token COMMA    = ',';
}

parser csv {
    active csv
        = record+;

    active field
        = TEXT | STRING;

    active record
        = field ~ (COMMA ~ field)* ~ CRLF;
}
