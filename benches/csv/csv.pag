lexer {
    active token TEXT     = (!('"' | '\r' | '\n' | ','))+;
    active token STRING     = '"' ~ ('"' ~ '"' | !'"')* ~ '"';
    active token CRLF       = '\r'? ~ '\n';
    active token COMMA    = ',';
}

parser csv {
    active definition csv
        = record+;

    active definition field
        = TEXT | STRING; 

    active definition record
        = field ~ (COMMA ~ field)* ~ CRLF;  
}
