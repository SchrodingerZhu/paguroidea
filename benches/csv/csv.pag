lexer {
    token TEXT     = (!('"' | '\r' | '\n' | ','))+;
    token STRING     = '"' ~ ('"' ~ '"' | !'"')* ~ '"';
    token CRLF       = '\r'? ~ '\n';
    token COMMA    = ',';
}

parser csv {
    active csv
        = record+;

    active field
        = TEXT | STRING;

    active record
        = field ~ (COMMA ~ field)* ~ CRLF;
}
